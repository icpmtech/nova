<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Nova Hub - Explore Nova projects visually and quickly">
  <title>Nova Hub</title>

<link rel="manifest" href="/manifest.json" />
<meta name="theme-color" content="#00FFFF" />
<link rel="apple-touch-icon" href="/icons/icon-192.png" />

  <!-- SEO Meta Tags -->
  <meta name="keywords" content="Nova Hub, Nova projects, finance tools, search platforms, LLM platforms, analytics">
  <meta name="author" content="pedro martins & cantinhode.net">
  <meta property="og:title" content="Nova Hub & cantinhode.net">
  <meta property="og:description" content="Explore Nova projects visually and quickly">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://nova-hub.netlify.app/">
  <meta property="og:image" content="https://nova-hub.netlify.app/logo.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Nova Hub">
  <meta name="twitter:description" content="Explore Nova projects visually and quickly">
  <meta name="twitter:image" content="https://nova-hub.netlify.app/logo.png">

  
  
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8M25SCL0G0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8M25SCL0G0');
</script>

  <!-- Structured Data for SEO -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Nova Hub",
      "url": "https://nova-hub.netlify.app/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://nova-hub.netlify.app/?search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
  </script>

  <link rel="stylesheet" href="app.css">
  
</head>
<body>
  <button class="menu-toggle" id="menuToggle" aria-label="Toggle Menu">‚ò∞</button>

  <aside id="sidebar" aria-label="Main Navigation">
    <div class="nav-section">
      <img src="/logo.png" class="logo" alt="Nova Logo">
      <a href="#finance-tools" class="nav-icon" data-tooltip-en="Finance Tools" data-tooltip-pt="Ferramentas Financeiras" data-tooltip-es="Herramientas Financieras" data-tooltip-fr="Outils Financiers" data-tooltip aria-label="Finance Tools">üí∞</a>
      <a href="#search-platforms" class="nav-icon" data-tooltip-en="Search Platforms" data-tooltip-pt="Plataformas de Busca" data-tooltip-es="Plataformas de B√∫squeda" data-tooltip-fr="Plateformes de Recherche" data-tooltip aria-label="Search Platforms">üîç</a>
      <a href="#llm-platforms" class="nav-icon" data-tooltip-en="LLM Platforms" data-tooltip-pt="Plataformas LLM" data-tooltip-es="Plataformas LLM" data-tooltip-fr="Plateformes LLM" data-tooltip aria-label="LLM Platforms">ü§ñ</a>
      <a href="#analytics" class="nav-icon" data-tooltip-en="Analytics & More" data-tooltip-pt="An√°lises e Mais" data-tooltip-es="Anal√≠ticas y M√°s" data-tooltip-fr="Analyses et Plus" data-tooltip aria-label="Analytics & More">üìä</a>
    </div>
    <div class="nav-section">
      <a href="#" class="nav-icon" data-tooltip-en="Profile" data-tooltip-pt="Perfil" data-tooltip-es="Perfil" data-tooltip-fr="Profil" data-tooltip aria-label="Profile">üë§</a>
      <a href="#" class="nav-icon" data-tooltip-en="Settings" data-tooltip-pt="Configura√ß√µes" data-tooltip-es="Configuraci√≥n" data-tooltip-fr="Param√®tres" data-tooltip aria-label="Settings">‚öôÔ∏è</a>
      <a href="#" class="nav-icon" data-tooltip-en="Logout" data-tooltip-pt="Sair" data-tooltip-es="Salir" data-tooltip-fr="D√©connexion" data-tooltip aria-label="Logout">‚èª</a>
    </div>
  </aside>

  <main id="main-content">
    <header>
      <h1 id="main-title">Nova Hub</h1>
      <p id="subtitle">Explora os projetos Nova de forma visual e r√°pida</p>

      <div class="language-switcher" role="group" aria-label="Language Selection">
        <button class="language-btn active" data-lang="pt" aria-pressed="true">PT</button>
        <button class="language-btn" data-lang="en" aria-pressed="false">EN</button>
        <button class="language-btn" data-lang="es" aria-pressed="false">ES</button>
        <button class="language-btn" data-lang="fr" aria-pressed="false">FR</button>
      </div>
    </header>

    <div id="content">
      <!-- Content will be dynamically generated -->
      <div class="loading-container" id="loading">
        <div class="loading-spinner" aria-label="Loading content"></div>
      </div>
    </div>
  </main>

  <button class="scroll-top" id="scrollTop" aria-label="Scroll to top">‚Üë</button>
  <div class="overlay" id="overlay"></div>
  <script>
const logoutBtn = document.querySelector('[aria-label="Logout"]');
const profileBtn = document.querySelector('[aria-label="Profile"]');

const profileTranslations = {
  pt: { title: "Perfil", name: "Nome", email: "Email", logout: "Sair", notLoggedIn: "Utilizador n√£o autenticado.", edit: "Editar Perfil" },
  en: { title: "Profile", name: "Name", email: "Email", logout: "Logout", notLoggedIn: "User not authenticated.", edit: "Edit Profile" },
  es: { title: "Perfil", name: "Nombre", email: "Correo", logout: "Salir", notLoggedIn: "Usuario no autenticado.", edit: "Editar Perfil" },
  fr: { title: "Profil", name: "Nom", email: "Email", logout: "D√©connexion", notLoggedIn: "Utilisateur non authentifi√©.", edit: "Modifier le Profil" }
};

const profileSection = document.createElement('section');
profileSection.id = 'profile-section';
profileSection.classList.add('hide');
profileSection.innerHTML = `
  <h2 id="profile-title"></h2>
  <div id="profile-info"></div>
  <div id="profile-actions" style="margin-top:1rem; text-align:center">
    <button id="editProfile" class="language-btn"></button>
  </div>
  <button id="logout" class="language-btn" style="margin-top:1.5rem"></button>
`;
document.getElementById('main-content').appendChild(profileSection);

profileBtn.addEventListener('click', () => {
  document.querySelectorAll('section').forEach(s => s.classList.add('hide'));
  profileSection.classList.remove('hide');

  const user = firebase.auth().currentUser;
  const profileInfo = document.getElementById('profile-info');
  const t = profileTranslations[currentLang];

  document.getElementById('profile-title').textContent = t.title;
  document.getElementById('logout').textContent = t.logout;
  document.getElementById('editProfile').textContent = t.edit;

  if (user) {
    const photo = user.photoURL ? `<img src="${user.photoURL}" alt="${t.name}" class="profile-photo" style="width:80px;height:80px;border-radius:50%;margin-bottom:1rem">` : '';
    profileInfo.innerHTML = `
      <div style="text-align:center">${photo}</div>
      <p><strong>${t.name}:</strong> ${user.displayName || 'An√≥nimo'}</p>
      <p><strong>${t.email}:</strong> ${user.email}</p>
    `;
  } else {
    profileInfo.innerHTML = `<p>${t.notLoggedIn}</p>`;
  }
});

document.getElementById('logout').addEventListener('click', () => {
  firebase.auth().signOut().then(() => {
    window.location.href = 'login.html';
  });
});

document.body.insertAdjacentHTML('beforeend', `
  <div id="editModal" class="modal hide" role="dialog" aria-modal="true" aria-labelledby="editModalTitle">
    <div class="modal-content">
      <h2 id="editModalTitle">Editar Perfil</h2>
      <form id="editProfileForm">
        <label for="displayName">Nome:</label>
        <input type="text" id="displayName" name="displayName" required>

        <label for="profileImage">Foto de Perfil:</label>
        <input type="file" id="profileImage" accept="image/*">

        <div id="imagePreview" style="margin-top: 1rem;"></div>
        <div id="editSpinner" class="hide" style="text-align:center; margin-top:1rem;">
          <div class="loading-spinner" style="margin: 0 auto;"></div>
          <p style="color: #ccc; margin-top: 0.5rem;">A atualizar...</p>
        </div>
        <div class="modal-actions">
          <button type="submit" class="language-btn">Guardar</button>
          <button type="button" class="language-btn cancel-btn" id="closeModal">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
`);

const editModal = document.getElementById("editModal");
const editForm = document.getElementById("editProfileForm");
const displayNameInput = document.getElementById("displayName");
const profileImageInput = document.getElementById("profileImage");
const imagePreview = document.getElementById("imagePreview");
const closeModalBtn = document.getElementById("closeModal");
const spinner = document.getElementById("editSpinner");

document.getElementById("editProfile").addEventListener("click", () => {
  const user = firebase.auth().currentUser;
  if (user) {
    displayNameInput.value = user.displayName || "";
    imagePreview.innerHTML = user.photoURL ? `<img src="${user.photoURL}" alt="Preview">` : "";
  }
  editModal.classList.remove("hide");
});

closeModalBtn.addEventListener("click", () => {
  editModal.classList.add("hide");
  editForm.reset();
  imagePreview.innerHTML = "";
});

profileImageInput.addEventListener("change", () => {
  const file = profileImageInput.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = (e) => {
      imagePreview.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
    };
    reader.readAsDataURL(file);
  }
});

editForm.addEventListener("submit", async (e) => {
  e.preventDefault();

  const user = firebase.auth().currentUser;
  const newName = displayNameInput.value.trim();
  const file = profileImageInput.files[0];
  let photoURL = user.photoURL;

  spinner.classList.remove("hide");

  try {
    if (file) {
      const storageRef = firebase.storage().ref();
      const imageRef = storageRef.child(`profileImages/${user.uid}_${Date.now()}`);
      await imageRef.put(file);
      photoURL = await imageRef.getDownloadURL();
    }

    await user.updateProfile({
      displayName: newName,
      photoURL: photoURL
    });

    alert("Perfil atualizado com sucesso!");
    editModal.classList.add("hide");
    editForm.reset();
    imagePreview.innerHTML = "";
    profileBtn.click();
  } catch (error) {
    console.error("Erro ao atualizar perfil:", error);
    alert("Erro: " + error.message);
  } finally {
    spinner.classList.add("hide");
  }
});
</script>
<script src="app.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js')
      .then(function () {
        console.log('Service Worker registado!');
      });
  }
</script>
</body>
</html>
